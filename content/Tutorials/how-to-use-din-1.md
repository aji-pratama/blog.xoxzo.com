Title: ダイアルインナンバーを使ってみよう
Date: 2017/07/01
Author: Akira Nonaka
Tags: 
Slug: 
Lang: ja
Summary: 電話の着信を制御するダイアルインナンバーAPIの概要を解説します

## ダイアルインナンバーとは?

ダイアルインナンバー(Dial in number;以降DINと書きます)はXOXZOの
テレフォニーAPIで、電話の着信を制御する機能です。ユーザーは、電話番号を
契約し、その電話に着信があった場合、転送やメッセージの再生するシステムを
APIを使って構築することができます。

利用するまでの大まかな流れは以下のようになります。

1. 空き番号を検索する
1. その中から、希望の電話番号を選び契約する
1. アクションを設定する
1. アクションサーバーを作る

## 着信時の動作
 
契約した電話番号に対して着信があると、XOXZOのクラウドシステムから
設定されたアクションURLに対してHTTPリクエストを出します。
メソッドは`GET`で２つのパラメータが付いています。

caller: 電話の発信者番号
recipient: 着信したDINの電話番号

これに対する応答は、アクションと呼ばれます。
アクションは１行のプレーンテキストで返し、種類には次の３つがあります。

<dl>
    <dt>playback
    <dd>指定されたMP3ファイルを再生
    <dt>transfer
    <dd>指定された電話番号へ転送する
    <dt>say
    <dd>指定されたテキストを読み上げる
</dl>

# 着信用電話番号を契約する

# アクションURLを設定する

# アクションサーバーをつくる

# 電話番号を解約する

# トラブルシュート


